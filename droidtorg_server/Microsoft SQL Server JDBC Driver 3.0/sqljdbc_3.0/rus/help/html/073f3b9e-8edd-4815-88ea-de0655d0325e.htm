<html DIR="LTR" xmlns:tool="http://www.microsoft.com/tooltip" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:ddue="http://ddue.schemas.microsoft.com/authoring/2003/5" xmlns:MSHelp="http://msdn.microsoft.com/mshelp">
  <head>
    <META HTTP-EQUIV="Content-Type" CONTENT="text/html; CHARSET=utf-8" />
    <META NAME="save" CONTENT="history" />
    <title>Основные сведения о поддержке SSL</title>
    
    <link rel="stylesheet" type="text/css" href="../local/Classic.css">
      
    </link>
    
    <script src="../local/script.js">
      
    </script><script src="../local/script_main.js">&amp;nbsp;</script>
  </head>
  <body>
    <!--Topic built:04/01/2010 05:03:29-->

    
    
    
    
    
    
    
    
    
    <div id="header">
      <table width="100%" id="topTable"><tr>
          <td align="left">
            <span id="headerBold">Основные сведения о поддержке SSL</span>
          </td>
          <td align="right">
            
          </td>
        </tr></table>
      
      
      
    </div>
    <div id="mainSection">
      
        
        
    <font color="DarkGray">
      
    </font>
    <p />
    
    <p />
  
        <div id="introductionSection" class="section">
    <p>Во время соединения с SQL Server драйвер JDBC Microsoft SQL Server запускает SSL-подтверждение, если приложение запрашивает шифрование и для экземпляра SQL Server настроена поддержка SSL-шифрования. Подтверждение обеспечивает возможность согласования сервером и клиентом алгоритмов шифрования, используемых для защиты данных. SSL-подтверждение обеспечивает защищенную передачу данных между клиентом и сервером. В ходе SSL-подтверждения сервер отправляет сертификат открытого ключа клиенту. Поставщик сертификата открытого ключа называется центром сертификации (ЦС). Клиент несет ответственность за проверку надежности используемого центра сертификации.</p>
    <p>Если приложение не запрашивает шифрование, драйвер JDBC Microsoft SQL Server не будет принудительно реализовывать в SQL Server поддержку SSL-шифрования. Если в экземпляре SQL Server не настроено принудительное выполнение SSL-шифрования, то соединение устанавливается без применения шифрования. Если в SQL Server настроено принудительное выполнение SSL-шифрования, драйвер автоматически включит SSL-шифрование при запуске на правильно настроенной виртуальной машине Java (JVM), а иначе соединение будет разорвано и в работе драйвера будет вызвана ошибка.</p>
    <div style="margin: .5em 1.5em .5em 1.5em"><b>Примечание. </b>
      Дополнительные сведения о настройке SSL-шифрования в SQL Server см. в разделе «Шифрование соединений с SQL Server» электронной документации SQL Server.<p />
    </div>
    <p>Чтобы разрешить приложениям использовать SSL-шифрование, в драйвер JDBC Microsoft SQL Server начиная с версии 1.2 введены следующие свойства соединения: <b>encrypt</b>, <b>trustServerCertificate</b>, <b>trustStore</b>, <b>trustStorePassword</b> и <b>hostNameInCertificate</b>. Дополнительные сведения см. в разделе <a href="f1b62700-f046-488d-bd6b-a5cd8fc345b7.htm">Задание свойств соединения</a>.</p>
    <p>В следующей таблице перечислены режимы работы драйвера JDBC Microsoft SQL Server при возможных вариантах SSL-соединений. Во всех вариантах используются различные наборы свойств SSL-соединений. В таблицу входят: </p>
    <ul><li>
        
          <b>blank</b>: «Свойство отсутствует в строке соединения»<br />
      </li><li>
        
          <b>value</b>: «Свойство существует в строке соединения и имеет допустимое значение»<br />
      </li><li>
        
          <b>any</b>: «Наличие свойства в строке соединения и допустимость его значения не проверяются»<br />
      </li></ul>
    <div style="margin: .5em 1.5em .5em 1.5em"><b>Примечание. </b>
      Это также применяется для проверки подлинности пользователей SQL Server и встроенной проверки подлинности Windows.<p />
    </div>
    <table width="100%" cellspacing="0" cellpadding="0" border="1" style="background-color: #CCCCCC;"><tr>
          <th>
            encrypt
          </th>
          <th>
            trustServerCertificate
          </th>
          <th>
            hostNameInCertificate
          </th>
          <th>
            trustStore
          </th>
          <th>
            trustStorePassword
          </th>
          <th>
            Режим работы
          </th>
        </tr><tr>
        <td>
          <p>false or blank</p>
        </td>
        <td>
          <p>any</p>
        </td>
        <td>
          <p>any</p>
        </td>
        <td>
          <p>any</p>
        </td>
        <td>
          <p>any</p>
        </td>
        <td>
          <p>Драйвер JDBC Microsoft SQL Server не будет принудительно реализовывать в SQL Server поддержку SSL-шифрования. Если на сервере имеется самозаверяющий сертификат, драйвер запускает обмен SSL-сертификатами. SSLсертификат не будет проверяться, а шифроваться будут только учетные данные (в пакете входа).</p>
          <p>Если сервер требует от клиента поддержки SSL-шифрования, драйвер запускает обмен SSL-сертификатами. Проверка SSL-сертификатов не будет выполняться, а будет выполняться шифрование всего сеанса связи.</p>
        </td>
      </tr><tr>
        <td>
          <p>true</p>
        </td>
        <td>
          <p>true</p>
        </td>
        <td>
          <p>any</p>
        </td>
        <td>
          <p>any</p>
        </td>
        <td>
          <p>any</p>
        </td>
        <td>
          <p>Драйвер JDBC Microsoft SQL Server отправляет запрос на использование SSL-шифрования в SQL Server. </p>
          <p>Если сервер требует от клиента поддерживать SSL-шифрование или сам поддерживает шифрование, драйвер запускает обмен SSL-сертификатами. Обратите внимание, что если свойство <b>trustServerCertificate</b> имеет значение "true", то драйвер не будет выполнять проверку SSL-сертификата.</p>
          <p>Если на сервере не настроена поддержка шифрования, то в работе драйвера будет вызвана ошибка и соединение будет разорвано.</p>
        </td>
      </tr><tr>
        <td>
          <p>true</p>
        </td>
        <td>
          <p>false or blank</p>
        </td>
        <td>
          <p>blank</p>
        </td>
        <td>
          <p>blank</p>
        </td>
        <td>
          <p>blank</p>
        </td>
        <td>
          <p>Драйвер JDBC Microsoft SQL Server отправляет запрос на использование SSL-шифрования в SQL Server. </p>
          <p>Если сервер требует от клиента поддерживать SSL-шифрование или сам поддерживает шифрование, драйвер запускает обмен SSL-сертификатами. </p>
          <p>Драйвер будет использовать для проверки SSL-сертификата свойство <b>serverName</b>, указанное в URL-адресе соединения, а выбор хранилища сертификатов для использования будет зависеть от правил поиска фабрики.</p>
          <p>Если на сервере не настроена поддержка шифрования, то в работе драйвера будет вызвана ошибка и соединение будет разорвано.</p>
        </td>
      </tr><tr>
        <td>
          <p>true</p>
        </td>
        <td>
          <p>false or blank</p>
        </td>
        <td>
          <p>value</p>
        </td>
        <td>
          <p>blank</p>
        </td>
        <td>
          <p>blank</p>
        </td>
        <td>
          <p>Драйвер JDBC Microsoft SQL Server отправляет запрос на использование SSL-шифрования в SQL Server. </p>
          <p>Если сервер требует от клиента поддерживать SSL-шифрование или сам поддерживает шифрование, драйвер запускает обмен SSL-сертификатами. </p>
          <p>Драйвер проверяет значение субъекта SSL-сертификата с помощью значения, указанного в свойстве <b>hostNameInCertificate</b>.</p>
          <p>Если на сервере не настроена поддержка шифрования, то в работе драйвера будет вызвана ошибка и соединение будет разорвано.</p>
        </td>
      </tr><tr>
        <td>
          <p>true</p>
        </td>
        <td>
          <p>false or blank</p>
        </td>
        <td>
          <p>blank</p>
        </td>
        <td>
          <p>value</p>
        </td>
        <td>
          <p>value</p>
        </td>
        <td>
          <p>Драйвер JDBC Microsoft SQL Server отправляет запрос на использование SSL-шифрования в SQL Server. </p>
          <p>Если сервер требует от клиента поддерживать SSL-шифрование или сам поддерживает шифрование, драйвер запускает обмен SSL-сертификатами. </p>
          <p>Драйвер использует значение свойства <b>trustStore</b> для поиска файла сертификата trustStore и значение свойства <b>trustStorePassword</b> для проверки целостности файла trustStore.</p>
          <p>Если на сервере не настроена поддержка шифрования, то в работе драйвера будет вызвана ошибка и соединение будет разорвано.</p>
        </td>
      </tr><tr>
        <td>
          <p>true</p>
        </td>
        <td>
          <p>false or blank</p>
        </td>
        <td>
          <p>blank</p>
        </td>
        <td>
          <p>blank</p>
        </td>
        <td>
          <p>value</p>
        </td>
        <td>
          <p>Драйвер JDBC Microsoft SQL Server отправляет запрос на использование SSL-шифрования в SQL Server. </p>
          <p>Если сервер требует от клиента поддерживать SSL-шифрование или сам поддерживает шифрование, драйвер запускает обмен SSL-сертификатами. </p>
          <p>Драйвер использует значение свойства <b>trustStorePassword</b> для проверки целостности файла trustStore, выбранного по умолчанию.</p>
          <p>Если на сервере не настроена поддержка шифрования, то в работе драйвера будет вызвана ошибка и соединение будет разорвано.</p>
        </td>
      </tr><tr>
        <td>
          <p>true</p>
        </td>
        <td>
          <p>false or blank</p>
        </td>
        <td>
          <p>blank</p>
        </td>
        <td>
          <p>value</p>
        </td>
        <td>
          <p>blank</p>
        </td>
        <td>
          <p>Драйвер JDBC Microsoft SQL Server отправляет запрос на использование SSL-шифрования в SQL Server. </p>
          <p>Если сервер требует от клиента поддерживать SSL-шифрование или сам поддерживает шифрование, драйвер запускает обмен SSL-сертификатами. </p>
          <p>Драйвер использует значение свойства <b>trustStore</b> для поиска местоположения файла trustStore.</p>
          <p>Если на сервере не настроена поддержка шифрования, то в работе драйвера будет вызвана ошибка и соединение будет разорвано.</p>
        </td>
      </tr><tr>
        <td>
          <p>true</p>
        </td>
        <td>
          <p>false or blank</p>
        </td>
        <td>
          <p>value</p>
        </td>
        <td>
          <p>blank</p>
        </td>
        <td>
          <p>value</p>
        </td>
        <td>
          <p>Драйвер JDBC Microsoft SQL Server отправляет запрос на использование SSL-шифрования в SQL Server. </p>
          <p>Если сервер требует от клиента поддерживать SSL-шифрование или сам поддерживает шифрование, драйвер запускает обмен SSL-сертификатами. </p>
          <p>Драйвер использует значение свойства <b>trustStorePassword</b> для проверки целостности файла trustStore, выбранного по умолчанию. Драйвер также использует значение свойства <b>hostNameInCertificate</b> для проверки SSL-сертификата.</p>
          <p>Если на сервере не настроена поддержка шифрования, то в работе драйвера будет вызвана ошибка и соединение будет разорвано.</p>
        </td>
      </tr><tr>
        <td>
          <p>true</p>
        </td>
        <td>
          <p>false or blank</p>
        </td>
        <td>
          <p>value</p>
        </td>
        <td>
          <p>value</p>
        </td>
        <td>
          <p>blank</p>
        </td>
        <td>
          <p>Драйвер JDBC Microsoft SQL Server отправляет запрос на использование SSL-шифрования в SQL Server. </p>
          <p>Если сервер требует от клиента поддерживать SSL-шифрование или сам поддерживает шифрование, драйвер запускает обмен SSL-сертификатами. </p>
          <p>Драйвер использует значение свойства <b>trustStore</b> для поиска местоположения файла trustStore. Драйвер также использует значение свойства <b>hostNameInCertificate</b> для проверки SSL-сертификата.</p>
          <p>Если на сервере не настроена поддержка шифрования, то в работе драйвера будет вызвана ошибка и соединение будет разорвано.</p>
        </td>
      </tr><tr>
        <td>
          <p>true</p>
        </td>
        <td>
          <p>false or blank</p>
        </td>
        <td>
          <p>value</p>
        </td>
        <td>
          <p>value</p>
        </td>
        <td>
          <p>value</p>
        </td>
        <td>
          <p>Драйвер JDBC Microsoft SQL Server отправляет запрос на использование SSL-шифрования в SQL Server. </p>
          <p>Если сервер требует от клиента поддерживать SSL-шифрование или сам поддерживает шифрование, драйвер запускает обмен SSL-сертификатами. </p>
          <p>Драйвер использует значение свойства <b>trustStore</b> для поиска файла сертификата trustStore и значение свойства <b>trustStorePassword</b> для проверки целостности файла trustStore. Драйвер также использует значение свойства <b>hostNameInCertificate</b> для проверки SSL-сертификата.</p>
          <p>Если на сервере не настроена поддержка шифрования, то в работе драйвера будет вызвана ошибка и соединение будет разорвано.</p>
        </td>
      </tr></table>
    <p>Если свойство шифрования имеет значение <b>true</b>, драйвер JDBC Microsoft SQL Server использует для согласования SSL-шифрования с SQL Server поставщика безопасности JSSE в JVM, настроенного по умолчанию. Поставщик безопасности по умолчанию может не поддерживать все функции, необходимые для успешного согласования SSL-шифрования. Например, поставщик безопасности по умолчанию может не поддерживать размер открытого ключа RSA, используемого в SSL-сертификате SQL Server. В этом случае поставщик безопасности по умолчанию может вызвать ошибку, в результате которой драйвер JDBC разорвет соединение. Чтобы устранить эту неполадку, выполните одно из следующих действий.</p>
    <ul><li>
        Настройка SQL Server с использованием сертификата сервера с меньшим открытым ключом RSA<br />
      </li><li>
        Настройте в JVM использование другого поставщика безопасности JSSE в файле свойств безопасности «&lt;java-home&gt;/lib/security/java.security».<br />
      </li><li>
        Используйте другой JVM<br />
      </li></ul>
  </div><h1 class="heading">Проверка SSL-сертификата сервера</h1><div id="sectionSection0" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5">
      <p xmlns="">В ходе SSL-подтверждения сервер отправляет сертификат открытого ключа клиенту. Драйвер JDBC или клиент должны обеспечить проверку того, что сертификат сервера выдан центром сертификации, которому доверяет клиент. Драйвер требует соответствия сертификата сервера следующим требованиям:</p>
      <ul xmlns=""><li>
          Сертификат должен быть выдан доверенным центром сертификации.<br />
        </li><li>
          Сертификат должен быть выдан для проверки подлинности серверов.<br />
        </li><li>
          Сертификат является действительным на текущую дату.<br />
        </li><li>
          Свойство субъекта сертификата указывает на то, что общее имя (CN) начинается с имени сервера, указанного в строке соединения, или, если указано, со значения свойства <b>hostNameInCertificate</b>. Если имя сервера представляет собой IP-адрес, то драйвер проверяет, начинается ли значение CN с IP-адреса. <br />
        </li></ul>
    </content></div><span id="seeAlsoSpan"><h1 class="heading">См. также</h1></span><div id="seeAlsoSection" class="section" name="collapseableSection"><a href="8e566243-2f93-4b21-8065-3c8336649309.htm">Использование SSL-шифрования</a><br /><a href="90724ec6-a9cb-43ef-903e-793f89410bc0.htm">Защита приложений драйвера JDBC</a><br /><br /></div><!--[if gte IE 5]>
			<tool:tip element="seeAlsoToolTip" avoidmouse="false"/><tool:tip element="languageFilterToolTip" avoidmouse="false"/><tool:tip element="roleInfoSpan" avoidmouse="false"/>
		<![endif]-->
      <div id="footer" class="section">
        
		<hr />
		
		<span id="fb" class="feedbackcss">
			
			
		</span>
		
		<a href="9bad553b-9e70-4696-8499-2e35f772a1e0.htm">
			
			© Корпорация Майкрософт (Microsoft Corporation), 2010. Все права защищены.
		</a>
 	
	
      </div>
    </div>
  </body>
</html>